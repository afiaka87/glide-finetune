# MyPy configuration for GLIDE finetune project
# Strict type checking following Clay's standards

[mypy]
# Python version
python_version = 3.11

# Strict mode settings
strict = True
warn_return_any = True
warn_unused_configs = True
disallow_untyped_defs = True
disallow_any_unimported = True
no_implicit_optional = True
check_untyped_defs = True
warn_redundant_casts = True
warn_unused_ignores = True
warn_no_return = True
warn_unreachable = True
strict_equality = True

# Import discovery
namespace_packages = True
explicit_package_bases = True
mypy_path = src

# Error output
show_error_codes = True
show_error_context = True
pretty = True
show_column_numbers = True
show_absolute_path = True

# Incremental mode
incremental = True
cache_dir = .mypy_cache

# Plugins
plugins = pydantic.mypy

# Exclude patterns
exclude = ^(\.venv|build|dist|checkpoints|wandb|\.trash|glide-text2im)/

# Per-module options for third-party libraries
[mypy-torch.*]
ignore_missing_imports = True

[mypy-torchvision.*]
ignore_missing_imports = True

[mypy-PIL.*]
ignore_missing_imports = True

[mypy-numpy.*]
ignore_missing_imports = True

[mypy-scipy.*]
ignore_missing_imports = True

[mypy-matplotlib.*]
ignore_missing_imports = True

[mypy-tqdm.*]
ignore_missing_imports = True

[mypy-wandb.*]
ignore_missing_imports = True

[mypy-webdataset.*]
ignore_missing_imports = True

[mypy-accelerate.*]
ignore_missing_imports = True

[mypy-transformers.*]
ignore_missing_imports = True

[mypy-clip.*]
ignore_missing_imports = True

[mypy-glide_text2im.*]
ignore_missing_imports = True

[mypy-omegaconf.*]
ignore_missing_imports = True

[mypy-einops.*]
ignore_missing_imports = True

[mypy-ftfy.*]
ignore_missing_imports = True

[mypy-nltk.*]
ignore_missing_imports = True

[mypy-spacy.*]
ignore_missing_imports = True

[mypy-timm.*]
ignore_missing_imports = True

[mypy-open_clip.*]
ignore_missing_imports = True

[mypy-pytorch_lightning.*]
ignore_missing_imports = True

[mypy-pybloom_live.*]
ignore_missing_imports = True

[mypy-bitsandbytes.*]
ignore_missing_imports = True

[mypy-mpi4py.*]
ignore_missing_imports = True

[mypy-psutil.*]
ignore_missing_imports = True

[mypy-termcolor.*]
ignore_missing_imports = True

[mypy-regex.*]
ignore_missing_imports = True

[mypy-packaging.*]
ignore_missing_imports = True

[mypy-yaml.*]
ignore_missing_imports = True

# Pydantic plugin configuration
[pydantic-mypy]
init_forbid_extra = True
init_typed = True
warn_required_dynamic_aliases = True
warn_untyped_fields = True